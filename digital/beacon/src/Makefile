BITCLOUD_PATH = $(PWD)/Bitcloud_stack

# PROJECT_NAME = MeshBean
# CONFIG_NAME = All_ZigBit_Atmega1281_Rf230_8Mhz_Gcc

#PROJECT_NAME = RCB230
#CONFIG_NAME = All_Rcb_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Rcb_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Router_Rcb_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = All_Sec_Rcb_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_Rcb_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_Rcb_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = All_Rcb_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Coordinator_Rcb_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Router_Rcb_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = All_Sec_Rcb_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_Rcb_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Router_Sec_Rcb_Atmega1281_Rf230_8Mhz_Iar

#PROJECT_NAME = RCB231
#CONFIG_NAME = All_Rcb_Atmega1281_Rf231_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Rcb_Atmega1281_Rf231_8Mhz_Gcc
#CONFIG_NAME = Router_Rcb_Atmega1281_Rf231_8Mhz_Gcc
#CONFIG_NAME = All_Sec_Rcb_Atmega1281_Rf231_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_Rcb_Atmega1281_Rf231_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_Rcb_Atmega1281_Rf231_8Mhz_Gcc
#CONFIG_NAME = All_Rcb_Atmega1281_Rf231_8Mhz_Iar
#CONFIG_NAME = Coordinator_Rcb_Atmega1281_Rf231_8Mhz_Iar
#CONFIG_NAME = Router_Rcb_Atmega1281_Rf231_8Mhz_Iar
#CONFIG_NAME = All_Sec_Rcb_Atmega1281_Rf231_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_Rcb_Atmega1281_Rf231_8Mhz_Iar
#CONFIG_NAME = Router_Sec_Rcb_Atmega1281_Rf231_8Mhz_Iar

#PROJECT_NAME = MeshBean_900
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf212_8Mhz_Iar

#PROJECT_NAME = RCB212
#CONFIG_NAME = All_Rcb_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Rcb_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Router_Rcb_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = All_Sec_Rcb_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_Rcb_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_Rcb_Atmega1281_Rf212_8Mhz_Gcc
#CONFIG_NAME = All_Rcb_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Coordinator_Rcb_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Router_Rcb_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = All_Sec_Rcb_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_Rcb_Atmega1281_Rf212_8Mhz_Iar
#CONFIG_NAME = Router_Sec_Rcb_Atmega1281_Rf212_8Mhz_Iar

PROJECT_NAME = MeshBean
CONFIG_NAME = All_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf230B_8Mhz_Gcc
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf230B_8Mhz_Gcc
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf230B_8Mhz_Gcc
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf230B_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf230B_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf230B_8Mhz_Gcc
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf230B_8Mhz_Iar
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf230B_8Mhz_Iar
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf230B_8Mhz_Iar
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf230B_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf230B_8Mhz_Iar
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf230B_8Mhz_Iar

#PROJECT_NAME = MeshBean_Amp
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Gcc
#CONFIG_NAME = All_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Coordinator_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Router_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = All_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Coordinator_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Iar
#CONFIG_NAME = Router_Sec_ZigBit_Atmega1281_Rf230_8Mhz_Iar

BASE = ../../avr
HOST_PROGS = beacon
beacon_SOURCES = main_simu.c position.c formula.c recovery.c update.c trust.c
MODULES = math/fixed utils
# atmega8, atmega8535, atmega128...
AVR_MCU = atmega128
# -O2 : speed
# -Os : size
OPTIMIZE = -O2 -lm -DSIMULATOR
include $(BASE)/make/Makefile.gen

NUMBER:= 1 2 3

simu:host
	python simulator.py
	
avr:
	for count in $(NUMBER); do\
		$(MAKE) -C makefiles/$(PROJECT_NAME) -f Makefile_$(CONFIG_NAME) clean BITCLOUD_PATH=$(BITCLOUD_PATH);\
		$(MAKE) -C makefiles/$(PROJECT_NAME) -f Makefile_$(CONFIG_NAME) all APP_NAME=Beacon_$$count BITCLOUD_PATH=$(BITCLOUD_PATH) LOL_NUMBER=$$count;\
	done;\

clean:
	for count in $(NUMBER); do\
		$(MAKE) -C makefiles/$(PROJECT_NAME) -f Makefile_$(CONFIG_NAME) clean APP_NAME=Beacon_$$count BITCLOUD_PATH=$(BITCLOUD_PATH);\
	done;\


